#!/usr/bin/env node
// QCåˆ†æ•£ãƒ†ã‚¹ãƒˆç”¨GitHub Issuesè‡ªå‹•ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

const { execSync } = require('child_process');

const terminalTasks = {
  'terminal-1': {
    name: 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»UI/UX',
    tasks: [
      'ğŸ“± ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³è¡¨ç¤ºãƒ†ã‚¹ãƒˆ (375px-414px)',
      'ğŸ’» ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤ºãƒ†ã‚¹ãƒˆ',
      'ğŸ¨ UI/UXãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ',
      'ğŸ”— ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒªãƒ³ã‚¯ãƒ†ã‚¹ãƒˆ',
      'ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ',
      'ğŸ¯ ãƒœã‚¿ãƒ³ãƒ»æ“ä½œæ€§ãƒ†ã‚¹ãƒˆ',
      'ğŸŒˆ ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ»å¯èª­æ€§ãƒ†ã‚¹ãƒˆ',
      'âš¡ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ†ã‚¹ãƒˆ'
    ]
  },
  'terminal-2': {
    name: 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»API',
    tasks: [
      'ğŸ—„ï¸ Supabase ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ',
      'ğŸ”Œ èªè¨¼API (/api/auth/*) ãƒ†ã‚¹ãƒˆ',
      'ğŸ° ã‚¬ãƒãƒ£API (/api/gacha/*) ãƒ†ã‚¹ãƒˆ',
      'ğŸ‘¨â€ğŸ’¼ ç®¡ç†API (/api/admin/*) ãƒ†ã‚¹ãƒˆ',
      'ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼API (/api/user/*) ãƒ†ã‚¹ãƒˆ',
      'âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãƒ†ã‚¹ãƒˆ',
      'ğŸ“Š å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ†ã‚¹ãƒˆ',
      'ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»èªè¨¼ãƒ†ã‚¹ãƒˆ'
    ]
  },
  'terminal-3': {
    name: 'ã‚¬ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ ',
    tasks: [
      'ğŸ² ã‚¬ãƒãƒ£åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸ“Š ç¢ºç‡æ¤œè¨¼ãƒ†ã‚¹ãƒˆ (SSR:3%, SR:12%, R:25%, N:60%)',
      'ğŸ­ æ¼”å‡ºãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºãƒ†ã‚¹ãƒˆ',
      'ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ',
      'ğŸ’³ ãƒã‚¤ãƒ³ãƒˆæ¶ˆè²»ãƒ»è¨ˆç®—ãƒ†ã‚¹ãƒˆ',
      'ğŸ´ ã‚«ãƒ¼ãƒ‰æ’å‡ºãƒ»ä»˜ä¸ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ',
      'ğŸ“± ã‚¬ãƒãƒ£çµæœè¡¨ç¤ºãƒ»ã‚·ã‚§ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸ“ˆ çµ±è¨ˆçš„åã‚Šãƒã‚§ãƒƒã‚¯ (1000å›ãƒ†ã‚¹ãƒˆ)'
    ]
  },
  'terminal-4': {
    name: 'Adminãƒ»æ±ºæ¸ˆ',
    tasks: [
      'ğŸ” Adminèªè¨¼ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ',
      'ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸ° ã‚¬ãƒãƒ£ç®¡ç†ãƒ»è¨­å®šæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸƒ ã‚«ãƒ¼ãƒ‰ç®¡ç†ãƒ»CSV import ãƒ†ã‚¹ãƒˆ',
      'ğŸ“¦ ç™ºé€ç®¡ç†ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ãƒ†ã‚¹ãƒˆ',
      'ğŸ“¢ ãŠçŸ¥ã‚‰ã›ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç®¡ç†æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ',
      'ğŸ’³ Squareæ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ',
      'ğŸ“Š å£²ä¸Šçµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ'
    ]
  },
  'terminal-5': {
    name: 'æ¼”å‡ºãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡',
    tasks: [
      'ğŸ¤– AIç”»åƒç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ',
      'ğŸ¬ ã‚¬ãƒãƒ£æ¼”å‡ºå‹•ç”»ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ',
      'ğŸ”” ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ',
      'ğŸ–¼ï¸ å‹•çš„ãƒãƒŠãƒ¼ç”Ÿæˆãƒ»è¡¨ç¤ºãƒ†ã‚¹ãƒˆ',
      'ğŸµ éŸ³å£°ãƒ»BGMå†ç”Ÿãƒ†ã‚¹ãƒˆ',
      'âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ',
      'ğŸ“± é€šçŸ¥è¨±å¯ãƒ»é€å—ä¿¡ãƒ†ã‚¹ãƒˆ',
      'ğŸª ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ãƒ»ç”»åƒé…å»¶èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ'
    ]
  },
  'terminal-6': {
    name: 'QCãƒ»çµ±åˆ',
    tasks: [
      'ğŸ”§ ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ',
      'âš–ï¸ æ³•çš„ãƒšãƒ¼ã‚¸ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ',
      'ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³',
      'ğŸ“Š çµ±åˆãƒ»ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ',
      'ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ç½å®³å¾©æ—§ãƒ†ã‚¹ãƒˆ',
      'ğŸš€ ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ',
      'ğŸ” OWASP Top 10 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯',
      'ğŸ¯ æœ€çµ‚Go/No-Goåˆ¤å®š'
    ]
  }
};

function createQCIssues() {
  console.log('ğŸš€ QCåˆ†æ•£ãƒ†ã‚¹ãƒˆç”¨ GitHub Issues ä½œæˆé–‹å§‹');
  console.log('================================================');

  // GitHub CLI ã®ç¢ºèª
  try {
    execSync('gh --version', { stdio: 'ignore' });
  } catch (error) {
    console.error('âŒ GitHub CLI (gh) ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“');
    console.log('ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: https://cli.github.com/');
    return;
  }

  let issueCount = 0;

  // å„ç«¯æœ«ã®ã‚¿ã‚¹ã‚¯ã‚’Issueã¨ã—ã¦ä½œæˆ
  Object.entries(terminalTasks).forEach(([terminal, info]) => {
    console.log(`\nğŸ“± ${terminal}: ${info.name} ã®Issueä½œæˆä¸­...`);
    
    info.tasks.forEach((task, index) => {
      const issueTitle = `[${terminal.toUpperCase()}] ${task}`;
      const issueBody = `## æ‹…å½“ç«¯æœ«
${terminal}: ${info.name}

## ãƒ†ã‚¹ãƒˆé …ç›®
${task}

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™å®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå®Œäº†
- [ ] çµæœè¨˜éŒ²å®Œäº†
- [ ] å•é¡Œç™ºè¦‹æ™‚ã¯è©³ç´°è¨˜éŒ²

## é€²æ—å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
\`\`\`
æ™‚åˆ»: [HH:MM]
ç«¯æœ«: ${terminal}
ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: [æº–å‚™ä¸­/å®Ÿè¡Œä¸­/å®Œäº†/å•é¡Œç™ºç”Ÿ]
çµæœ: [æˆåŠŸ/å¤±æ•—/è¦ç¢ºèª]
è©³ç´°: [å…·ä½“çš„ãªçµæœãƒ»å•é¡Œç‚¹]
æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: [å¿…è¦ãªå¯¾å¿œ]
\`\`\`

## æˆåŠŸåŸºæº–
- âœ… æ­£å¸¸å‹•ä½œç¢ºèª
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŸºæº–é”æˆ
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶æº€è¶³

---

ğŸ¯ **ç›®æ¨™**: 44æ™‚é–“ä»¥å†…ã®å®Œå…¨ãªQCå®Œäº†
ğŸ”„ **æ›´æ–°**: é€²æ—ã«å¿œã˜ã¦ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
ğŸš¨ **ç·Šæ€¥**: Criticalå•é¡Œç™ºè¦‹æ™‚ã¯å³åº§ã« priority-critical ãƒ©ãƒ™ãƒ«è¿½åŠ `;

      try {
        // GitHub Issue ä½œæˆ
        const labels = [
          'QC',
          terminal,
          'priority-high',
          'status-pending'
        ];

        const command = `gh issue create --title "${issueTitle}" --body "${issueBody}" --label "${labels.join(',')}"`;
        
        execSync(command, { stdio: 'ignore' });
        issueCount++;
        
        console.log(`  âœ… Issue #${issueCount}: ${task.substring(0, 30)}...`);
        
      } catch (error) {
        console.error(`  âŒ Issueä½œæˆå¤±æ•—: ${task}`);
        console.error(`  ã‚¨ãƒ©ãƒ¼: ${error.message}`);
      }
    });
  });

  console.log(`\nğŸ‰ QC Issues ä½œæˆå®Œäº†: ${issueCount}ä»¶`);
  console.log('\nğŸ“Š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:');
  console.log('1. å„ç«¯æœ«æ‹…å½“è€…ã«Issueå‰²ã‚Šå½“ã¦');
  console.log('2. é€²æ—ç›£è¦–é–‹å§‹: node scripts/qc-progress-report.js');
  console.log('3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–: watch -n 300 node scripts/qc-progress-report.js');
  console.log('\nğŸ”— GitHub Issuesç¢ºèª:');
  console.log('gh issue list --label="QC"');
}

// ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œ
if (require.main === module) {
  createQCIssues();
}

module.exports = { createQCIssues };
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{5139:(e,s,a)=>{Promise.resolve().then(a.bind(a,5430))},5430:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(5155),t=a(2115),l=a(5695),i=a(6874),n=a.n(i),d=a(1720),c=a(3568),u=a(9509);function o(){let e=(0,l.useRouter)(),[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[m,x]=(0,t.useState)(!1),[h,b]=(0,t.useState)(""),p=async a=>{a.preventDefault(),x(!0),b("");try{var r;let a=(0,d.kT)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"),{data:t,error:l}=await a.auth.signInWithPassword({email:s,password:i});if(l)return void(l.message.includes("Invalid login credentials")?b("メールアドレスまたはパスワードが正しくありません"):l.message.includes("Email not confirmed")?b("メールアドレスが確認されていません"):b(l.message));let n=u.env.NEXT_PUBLIC_ADMIN_EMAIL||"admin@aceoripa.com";(null==(r=t.user)?void 0:r.email)===n?(c.oR.success("管理画面にログインしました"),e.push("/admin")):(await a.auth.signOut(),b("管理者権限がありません"))}catch(e){console.error("Login error:",e),b("ログインに失敗しました")}finally{x(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"ACEorIPA Admin"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"管理者ログイン"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"メールアドレス"}),(0,r.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin@aceoripa.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"パスワード"}),(0,r.jsx)("input",{id:"password",type:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",required:!0})]}),h&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:h})}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"ログイン中...":"ログイン"})]}),(0,r.jsxs)("div",{className:"mt-6 text-center",children:[(0,r.jsx)(n(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-800",children:"← ユーザー画面に戻る"}),(0,r.jsx)("span",{className:"mx-2 text-gray-400",children:"|"}),(0,r.jsx)(n(),{href:"/admin/login/demo",className:"text-sm text-blue-600 hover:text-blue-800",children:"デモモードで試す"})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"ログインできない場合"}),(0,r.jsxs)("ol",{className:"text-xs text-blue-700 space-y-1",children:[(0,r.jsx)("li",{children:"1. Supabaseダッシュボードで管理者ユーザーを作成"}),(0,r.jsxs)("li",{children:["2. Email: ",(0,r.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"admin@aceoripa.com"})," で登録"]}),(0,r.jsx)("li",{children:"3. Auto Confirm User にチェック"}),(0,r.jsx)("li",{children:"4. 環境変数が正しく設定されているか確認"})]}),(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200",children:(0,r.jsxs)("p",{className:"text-xs text-blue-700",children:["詳細は ",(0,r.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"/docs/ADMIN_LOGIN_SETUP.md"})," を参照"]})})]})]})})}},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,3568,4982,1720,8441,1684,7358],()=>s(5139)),_N_E=e.O()}]);
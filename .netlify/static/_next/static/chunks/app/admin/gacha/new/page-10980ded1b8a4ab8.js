(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5690],{2371:(e,a,s)=>{Promise.resolve().then(s.bind(s,3514))},3514:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var r=s(5155),t=s(2115),l=s(5695),d=s(3568),u=s(1720);function n(){let e=(0,l.useRouter)(),a=(0,u.kT)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"),[s,n]=(0,t.useState)(!1),[c,i]=(0,t.useState)({name:"",description:"",single_price:150,multi_price:1500,is_active:!0,start_date:"",end_date:"",banner_image_url:"",featured_card_ids:"",guarantee_sr_on_multi:!0}),o=async s=>{s.preventDefault(),n(!0);try{let{data:s,error:r}=await a.from("gacha_products").insert([{...c,start_date:c.start_date||null,end_date:c.end_date||null,featured_card_ids:c.featured_card_ids?c.featured_card_ids.split(",").map(e=>e.trim()):[]}]).select().single();if(r)throw r;d.oR.success("ガチャを作成しました"),e.push("/admin/gacha/".concat(s.id,"/pools"))}catch(e){console.error("Error creating gacha:",e),d.oR.error("ガチャの作成に失敗しました")}finally{n(!1)}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"新規ガチャ作成"}),(0,r.jsxs)("form",{onSubmit:o,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ガチャ名"}),(0,r.jsx)("input",{type:"text",value:c.name,onChange:e=>i({...c,name:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>i({...c,description:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"単発価格（ポイント）"}),(0,r.jsx)("input",{type:"number",value:c.single_price,onChange:e=>i({...c,single_price:Number(e.target.value)}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"10連価格（ポイント）"}),(0,r.jsx)("input",{type:"number",value:c.multi_price,onChange:e=>i({...c,multi_price:Number(e.target.value)}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"バナー画像URL"}),(0,r.jsx)("input",{type:"url",value:c.banner_image_url,onChange:e=>i({...c,banner_image_url:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"https://example.com/banner.jpg"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"開始日（任意）"}),(0,r.jsx)("input",{type:"datetime-local",value:c.start_date,onChange:e=>i({...c,start_date:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"終了日（任意）"}),(0,r.jsx)("input",{type:"datetime-local",value:c.end_date,onChange:e=>i({...c,end_date:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ピックアップカードID（カンマ区切り）"}),(0,r.jsx)("input",{type:"text",value:c.featured_card_ids,onChange:e=>i({...c,featured_card_ids:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"card1, card2, card3"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:c.is_active,onChange:e=>i({...c,is_active:e.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"公開する"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:c.guarantee_sr_on_multi,onChange:e=>i({...c,guarantee_sr_on_multi:e.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"10連でSR以上確定"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:s?"作成中...":"作成"})]})]})]})}},5695:(e,a,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(a,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(a,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(a,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(a,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var a=a=>e(e.s=a);e.O(0,[3568,4982,1720,8441,1684,7358],()=>a(2371)),_N_E=e.O()}]);
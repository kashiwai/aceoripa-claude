(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9488],{3079:(e,l,s)=>{Promise.resolve().then(s.bind(s,6674))},6674:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>c});var i=s(5155),t=s(2115),a=s(3579),r=s(6408),n=s(3568);function c(){let[e,l]=(0,t.useState)([]),[s,c]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null),[u,p]=(0,t.useState)(!1),x=(0,a.createClientComponentClient)(),m=[{pull_count:1,display_name:"1回",price_multiplier:1,order_index:0},{pull_count:3,display_name:"3回",price_multiplier:2.8,order_index:1,is_discount:!0},{pull_count:5,display_name:"5回",price_multiplier:4.5,order_index:2,is_discount:!0},{pull_count:10,display_name:"10回",price_multiplier:9,order_index:3,is_popular:!0,is_discount:!0}];(0,t.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:e,error:s}=await x.from("gacha_pull_options").select("*").order("order_index");if(s)throw s;l(e||[])}catch(e){console.error("Error fetching pull options:",e),l(m.map((e,l)=>({...e,id:"default-".concat(l)})))}finally{c(!1)}},g=async e=>{try{var l;if(null==(l=e.id)?void 0:l.startsWith("default-")){let{error:l}=await x.from("gacha_pull_options").insert({pull_count:e.pull_count,display_name:e.display_name,icon_url:e.icon_url,price_multiplier:e.price_multiplier,is_popular:e.is_popular||!1,is_discount:e.is_discount||!1,order_index:e.order_index});if(l)throw l;n.Ay.success("プルオプションを作成しました")}else{let{error:l}=await x.from("gacha_pull_options").update({display_name:e.display_name,icon_url:e.icon_url,price_multiplier:e.price_multiplier,is_popular:e.is_popular,is_discount:e.is_discount,order_index:e.order_index}).eq("id",e.id);if(l)throw l;n.Ay.success("プルオプションを更新しました")}h(),o(null)}catch(e){console.error("Error saving pull option:",e),n.Ay.error("保存に失敗しました")}},_=async e=>{if(confirm("このプルオプションを削除しますか？"))try{let{error:l}=await x.from("gacha_pull_options").delete().eq("id",e);if(l)throw l;n.Ay.success("プルオプションを削除しました"),h()}catch(e){console.error("Error deleting pull option:",e),n.Ay.error("削除に失敗しました")}};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-900 p-8",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-8",children:"ガチャ回数アイコン管理"}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)("button",{onClick:()=>p(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold",children:"+ 新規プルオプション追加"})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(e=>(0,i.jsxs)(r.P.div,{className:"bg-gray-800 rounded-xl p-6 relative",whileHover:{scale:1.02},children:[(0,i.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.is_popular&&(0,i.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded",children:"人気"}),e.is_discount&&(0,i.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded",children:"お得"})]}),(0,i.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-700 rounded-xl flex items-center justify-center",children:e.icon_url?(0,i.jsx)("img",{src:e.icon_url,alt:e.display_name,className:"w-full h-full object-contain"}):(0,i.jsx)("span",{className:"text-4xl font-bold text-white",children:e.pull_count})}),(0,i.jsxs)("div",{className:"text-center mb-4",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:e.display_name}),(0,i.jsxs)("p",{className:"text-gray-400",children:["\xd7",e.price_multiplier," 価格"]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>o(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:"編集"}),(0,i.jsx)("button",{onClick:()=>_(e.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded",children:"削除"})]})]},e.id))}),(d||u)&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)(r.P.div,{className:"bg-gray-800 rounded-xl p-8 max-w-md w-full",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:u?"新規プルオプション":"プルオプション編集"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"回数"}),(0,i.jsx)("input",{type:"number",value:(null==d?void 0:d.pull_count)||1,onChange:e=>o(l=>({...l,pull_count:parseInt(e.target.value)})),className:"w-full bg-gray-700 text-white px-4 py-2 rounded",disabled:!u})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"表示名"}),(0,i.jsx)("input",{type:"text",value:(null==d?void 0:d.display_name)||"",onChange:e=>o(l=>({...l,display_name:e.target.value})),className:"w-full bg-gray-700 text-white px-4 py-2 rounded"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"アイコンURL（オプション）"}),(0,i.jsx)("input",{type:"text",value:(null==d?void 0:d.icon_url)||"",onChange:e=>o(l=>({...l,icon_url:e.target.value})),className:"w-full bg-gray-700 text-white px-4 py-2 rounded",placeholder:"/api/placeholder/icons/pull-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"価格倍率"}),(0,i.jsx)("input",{type:"number",step:"0.1",value:(null==d?void 0:d.price_multiplier)||1,onChange:e=>o(l=>({...l,price_multiplier:parseFloat(e.target.value)})),className:"w-full bg-gray-700 text-white px-4 py-2 rounded"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"表示順"}),(0,i.jsx)("input",{type:"number",value:(null==d?void 0:d.order_index)||0,onChange:e=>o(l=>({...l,order_index:parseInt(e.target.value)})),className:"w-full bg-gray-700 text-white px-4 py-2 rounded"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,i.jsx)("input",{type:"checkbox",checked:(null==d?void 0:d.is_popular)||!1,onChange:e=>o(l=>({...l,is_popular:e.target.checked})),className:"mr-2"}),"人気"]}),(0,i.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,i.jsx)("input",{type:"checkbox",checked:(null==d?void 0:d.is_discount)||!1,onChange:e=>o(l=>({...l,is_discount:e.target.checked})),className:"mr-2"}),"お得"]})]})]}),(0,i.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,i.jsx)("button",{onClick:()=>{g(d),p(!1)},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded font-semibold",children:"保存"}),(0,i.jsx)("button",{onClick:()=>{o(null),p(!1)},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded font-semibold",children:"キャンセル"})]})]})}),(0,i.jsxs)("div",{className:"mt-12 bg-gray-800 rounded-xl p-6",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"\uD83E\uDD16 アイコンAI生成プロンプト例"}),(0,i.jsxs)("div",{className:"space-y-2 text-gray-300",children:[(0,i.jsx)("p",{children:'• 1回: "Single dice roll icon, gold color, game UI style, transparent background"'}),(0,i.jsx)("p",{children:'• 3回: "Three dice stacked, silver color, sparkle effect, game icon design"'}),(0,i.jsx)("p",{children:'• 5回: "Five star burst, rainbow gradient, premium game icon, transparent PNG"'}),(0,i.jsx)("p",{children:'• 10回: "Ten explosion effect, golden crown, best value badge, game UI asset"'})]})]})]})})}}},e=>{var l=l=>e(e.s=l);e.O(0,[3568,4982,6408,3579,8441,1684,7358],()=>l(3079)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2427],{4974:(e,s,a)=>{Promise.resolve().then(a.bind(a,9833))},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},9833:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(5155),r=a(2115),l=a(5695),c=a(6874),n=a.n(c),i=a(6766);let d=["SS","S","A","B","C"],o={SS:"SS賞",S:"S賞",A:"A賞",B:"B賞",C:"C賞"};function h(){let e=(0,l.useParams)(),s=(0,l.useSearchParams)(),a=e.id;s.get("count");let[c,h]=(0,r.useState)(null),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(!0),[g,b]=(0,r.useState)(1);(0,r.useEffect)(()=>{v()},[a]);let v=async()=>{try{let e=await fetch("/api/gacha/products/".concat(a)),s=await e.json();h(s.product);let t=await fetch("/api/cards"),r=await t.json();u(r.cards||[])}catch(e){console.error("Failed to fetch gacha details:",e)}finally{p(!1)}},f=m.reduce((e,s)=>{let a=s.rarity.toUpperCase();return e[a]||(e[a]=[]),e[a].push(s),e},{}),N=e=>{console.log("".concat(e,"回ガチャを実行"))};return x?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(n(),{href:"/",className:"text-gray-700 hover:text-gray-900",children:"← 戻る"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:(null==c?void 0:c.name)||"ガチャ詳細"})]})})})}),(0,t.jsx)("div",{className:"sticky top-16 bg-white shadow-lg z-40",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"relative aspect-square",children:(0,t.jsx)(i.default,{src:(null==c?void 0:c.imageUrl)||"/api/placeholder/1024/1024",alt:(null==c?void 0:c.name)||"ガチャ",fill:!0,className:"object-cover"})}),(0,t.jsx)("div",{className:"p-4 bg-white",children:(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>N(1),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg transform hover:scale-105 transition",children:"1回"}),(0,t.jsx)("button",{onClick:()=>N(5),className:"bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transform hover:scale-105 transition",children:"5回"}),(0,t.jsx)("button",{onClick:()=>N(10),className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-8 rounded-lg transform hover:scale-105 transition",children:"10回"}),(0,t.jsx)("button",{onClick:()=>{let e=prompt("回数を入力してください","1");e&&!isNaN(Number(e))&&Number(e)>0&&N(Number(e))},className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-lg transform hover:scale-105 transition",children:"好きな数だけ"})]})})]})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"space-y-12",children:d.map(e=>{let s=f[e];return s&&0!==s.length?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 text-center",children:o[e]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:s.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition",children:[(0,t.jsx)("div",{className:"relative aspect-square",children:(0,t.jsx)(i.default,{src:e.imageUrl||"/api/placeholder/400/400",alt:e.name,fill:!0,className:"object-cover"})}),(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name})})]},e.id))})]},e):null})}),(0,t.jsxs)("div",{className:"mt-12 bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ガチャ詳細"}),(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:(null==c?void 0:c.description)||"このガチャの説明文です。"})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,6766,8441,1684,7358],()=>s(4974)),_N_E=e.O()}]);